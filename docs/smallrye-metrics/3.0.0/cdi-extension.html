<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CDI Extension for eager registration of annotated application metrics :: SmallRye documentation</title>
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">SmallRye documentation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Projects</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../index/index/index.html">Index</a>
            <a class="navbar-item" href="../../smallrye-config/index.html">SmallRye Config</a>
            <a class="navbar-item" href="../../smallrye-fault-tolerance/5.2.1/index.html">SmallRye Fault Tolerance</a>
            <a class="navbar-item" href="../../smallrye-health/3.0.1/index.html">SmallRye Health</a>
            <a class="navbar-item" href="../../smallrye-jwt/index.html">SmallRye JWT</a>
            <a class="navbar-item" href="index.html">SmallRye Metrics</a>
          </div>
        </div>
        <a class="navbar-item" href="https://smallrye.io/">SmallRye.io main website</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="smallrye-metrics" data-version="3.0.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">SmallRye Metrics</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Features on top of the specification</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="extended-metadata.html">Extended metadata</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Integrating SmallRye Metrics into runtimes</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="cdi-extension.html">CDI Extension</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="base-and-vendor-metrics.html">Base and vendor metrics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="metric-registry-lifecycle.html">Metric registry lifecycle</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="jaxrs-metrics.html">JAX-RS metrics</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../index/index/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">SmallRye Metrics</a></li>
    <li>Integrating SmallRye Metrics into runtimes</li>
    <li><a href="cdi-extension.html">CDI Extension</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">3.0.0</button>
  <div class="version-menu">
    <a class="version is-current" href="cdi-extension.html">3.0.0</a>
    <a class="version" href="../2.4.0/cdi-extension.html">2.4.0</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/smallrye/smallrye-metrics/edit/main/doc/modules/ROOT/pages/cdi-extension.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">CDI Extension for eager registration of annotated application metrics</h1>
<div class="paragraph">
<p>SmallRye Metrics provides a CDI extension which takes care of the annotation scanning and then registering
all detected metrics at deployment time. If your runtime supports CDI extensions, just make sure that
the <code>io.smallrye.metrics.setup.MetricCdiInjectionExtension</code> extension is active. It is mandatory
to register metrics beforehand, because the metric interceptors expect metrics to already exist when
the interceptor is invoked (with the exception of Gauges, where registration is performed in a
<code>@PostConstruct</code> method of the interceptor, that means when the owning bean is being instantiated).</p>
</div>
<div class="paragraph">
<p>If the target runtime does not support CDI extensions, a different strategy must be devised
for scanning the deployment and registering annotated metrics.</p>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the SmallRye Antora UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
